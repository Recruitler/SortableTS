function t(t){return function(t){return"touches"in t}(t)&&t.touches[0]?t.touches[0]:function(t){return"pointerType"in t}(t)&&"touch"===t.pointerType?t:null}function e(e){const n=t(e);return n?{clientX:n.clientX,clientY:n.clientY}:"clientX"in e?{clientX:e.clientX,clientY:e.clientY}:null}const n={capture:!1,passive:!1};class i{tasks=new Map;static instance;constructor(){}static getInstance(){return i.instance||(i.instance=new i),i.instance}removeEventListener(t,e,i){t.removeEventListener(e,i,n)}registerEventListener(t,e,i,a){e.addEventListener(i,a,n),this.addTask(t,{type:"event",cleanup:()=>this.removeEventListener(e,i,a)})}registerTimer(t,e){this.addTask(t,{type:"timer",cleanup:()=>clearTimeout(e)})}registerAnimationCleanup(t,e){this.addTask(t,{type:"animation",cleanup:e})}registerCustomCleanup(t,e){this.addTask(t,{type:"custom",cleanup:e})}addTask(t,e){this.tasks.has(t)||this.tasks.set(t,new Set),this.tasks.get(t).add(e)}cleanup(t){const e=this.tasks.get(t);e&&(e.forEach((t=>t.cleanup())),this.tasks.delete(t))}cleanupAll(){this.tasks.forEach(((t,e)=>{this.cleanup(e)})),this.tasks.clear()}}const a=Symbol("SortableInstance");class s{static instance;state;listeners=new Set;cleanupManager;constructor(){this.state={activeSortable:null,instances:new Map,dragOperation:{active:!1,sourceEl:null,dragEl:null,ghostEl:null,cloneEl:null,parentEl:null,nextEl:null,lastDownEl:null,oldIndex:null,newIndex:null,oldDraggableIndex:null,newDraggableIndex:null,moved:!1,position:{clientX:0,clientY:0,initialX:0,initialY:0,dx:0,dy:0}}},this.cleanupManager=i.getInstance()}static getInstance(){return s.instance||(s.instance=new s),s.instance}registerInstance(t,e){if(this.state.instances.has(t))throw new Error("Instance already registered for element");this.state.instances.set(t,e),t[a]=e,this.notifyListeners()}destroyInstance(t){this.cleanupManager.cleanup(t);let e=null;this.state.instances.forEach(((n,i)=>{n.instanceId===t&&(e=i)})),e&&this.removeInstance(e)}removeInstance(t){this.state.instances.delete(t),delete t[a],this.notifyListeners()}getInstance(t){const e=this.state.instances.get(t);return e||t[a]}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notifyListeners(){const t=this.getState();this.listeners.forEach((e=>e(t)))}getState(){return Object.freeze({...this.state})}startDrag(t,e=0,n=0){if(this.state.dragOperation.active)throw new Error("Drag operation already in progress");const i=this.getInstance(t);if(!i)throw new Error("No sortable instance found for element");this.state.activeSortable=i,this.state.dragOperation={...this.state.dragOperation,active:!0,sourceEl:t,oldIndex:this.getElementIndex(t),position:{clientX:e,clientY:n,initialX:e,initialY:n,dx:0,dy:0}},this.notifyListeners()}updateDragPosition(t,e){const n=this.state.dragOperation.position;this.state.dragOperation.position={clientX:t,clientY:e,initialX:n.initialX,initialY:n.initialY,dx:t-n.clientX,dy:e-n.clientY},this.notifyListeners()}updateDragElements(t){this.state.dragOperation={...this.state.dragOperation,...t},this.notifyListeners()}endDrag(){this.state.activeSortable=null,this.state.dragOperation={...this.state.dragOperation,active:!1,sourceEl:null,dragEl:null,ghostEl:null,cloneEl:null,oldIndex:null,newIndex:null},this.notifyListeners()}updateScrollPosition(t,e){this.state.dragOperation.position={...this.state.dragOperation.position,dx:this.state.dragOperation.position.dx+e,dy:this.state.dragOperation.position.dy+t},this.notifyListeners()}getElementFromPoint(t,e){const n=this.state.dragOperation.dragEl;if(n){const i=n.style.display;n.style.display="none";const a=document.elementFromPoint(t,e);return n.style.display=i,a}return document.elementFromPoint(t,e)}getEventTarget(e){const{target:n}=e;if(!(n instanceof HTMLElement))return null;if(n.shadowRoot){const i=t(e);if(i){const t=n.shadowRoot.elementFromPoint(i.clientX,i.clientY);if(t instanceof HTMLElement)return t}}return n}getElementIndex(t){return Array.from(t.parentElement?.children||[]).indexOf(t)}getActiveSortable(){return this.state.activeSortable}getDragOperation(){return Object.freeze({...this.state.dragOperation})}hasInstance(t){return this.state.instances.has(t)||a in t}getInstanceCount(){return this.state.instances.size}reset(){this.state.instances.forEach(((t,e)=>this.removeInstance(e))),this.endDrag(),this.listeners.clear()}}const r=(t,e)=>{if(!e||!t)return!1;">"===e[0]&&(e=e.substring(1));try{return t.matches?.(e)||!1}catch{return!1}},o=t=>t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode,l=(t,e,n=document,i=!1)=>{if(!t)return null;let a=t;do{if(null!=e&&(">"===e[0]?a.parentNode===n&&r(a,e):r(a,e))||i&&a===n)return a;if(a===n)break}while(a=o(a));return null},c=(t,e,n)=>{t&&e&&t.classList?.[n?"add":"remove"](e)},h=(t,e,n)=>{if(t?.style)if("object"!=typeof e){if(void 0===n)return getComputedStyle(t)[e];e in t.style||e.startsWith("webkit")||(e=`-webkit-${e}`),t.style[e]=`${n}${"string"==typeof n?"":"px"}`}else Object.entries(e).forEach((([e,n])=>{e in t.style||e.startsWith("webkit")||(e=`-webkit-${e}`),t.style[e]=`${n}${"string"==typeof n?"":"px"}`}))},d=(t,e=!1)=>{let n="";if("string"==typeof t)n=t;else{let i=t;do{const t=h(i,"transform");t&&"none"!==t&&(n=`${t} ${n}`)}while(!e&&(i=i.parentElement))}const i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i?new i(n):null},u=(t,e=!1,n=!1,i=!1,a)=>{if(t===window)return{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,width:window.innerWidth,height:window.innerHeight,x:0,y:0,toJSON(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}}};const s=t.getBoundingClientRect();let r=s.top,o=s.left,l=s.bottom,c=s.right,{width:u,height:g}=s;if((e||n)&&t!==window){a=a||t.parentNode;do{if(a?.getBoundingClientRect&&("none"!==h(a,"transform")||n&&"static"!==h(a,"position"))){const t=a.getBoundingClientRect(),e=parseInt(h(a,"border-top-width"))||0,n=parseInt(h(a,"border-left-width"))||0;r-=t.top+e,o-=t.left+n,l=r+s.height,c=o+s.width;break}}while(a=a.parentNode)}if(i&&t!==window){const e=d(a||t);if(e){const{a:t,d:n}=e;r/=n,o/=t,u/=t,g/=n,l=r+g,c=o+u}}return{top:r,left:o,bottom:l,right:c,width:u,height:g,x:o,y:r,toJSON(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}}}};const g=(t,e)=>Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width),p=(t,e,n,i,a)=>{if(!i)return;h(t,"transition",""),h(t,"transform","");const s=d(t),r=s?.a||1,o=s?.d||1,l=(e.left-n.left)/r,c=(e.top-n.top)/o;t.animatingX=!!l,t.animatingY=!!c,h(t,"transform",`translate3d(${l}px,${c}px,0)`),(t=>{t.offsetWidth})(t),h(t,"transition",`transform ${i}ms${a.easing?" "+a.easing:""}`),h(t,"transform","translate3d(0,0,0)"),t.animated&&clearTimeout(t.animated),t.animated=window.setTimeout((()=>{h(t,"transition",""),h(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),i)};class m{animationStates=[];animationCallbackId;sortable;state;cleanupManager;instanceId;constructor(t){this.sortable=t,this.state=s.getInstance(),this.cleanupManager=i.getInstance(),this.instanceId=Symbol("AnimationStateManager")}captureAnimationState(){if(this.animationStates=[],!this.sortable.options.animation)return;const t=this.state.getDragOperation();Array.from(this.sortable.el.children).forEach((e=>{if(!(e instanceof HTMLElement))return;if("none"===h(e,"display")||e===t.ghostEl)return;const n={target:e,rect:u(e)};this.animationStates.push(n);const i={...n.rect};e.thisAnimationDuration&&this.compensateForAnimation(e,i),e.fromRect=i}))}addAnimationState(t){this.animationStates.push(t)}removeAnimationState(t){const e=function(t,e){for(let n=0;n<t.length;n++)if(Object.keys(e).every((i=>e[i]===t[n][i])))return n;return-1}(this.animationStates,{target:t});-1!==e&&this.animationStates.splice(e,1)}animateAll(t){if(!this.sortable.options.animation)return void this.clearAnimation(t);const{animating:e,maxDuration:n}=this.processAnimationStates();this.scheduleCallback(e,n,t),this.animationStates=[]}animate(t,e,n,i){p(t,e,n,i,this.sortable.options)}compensateForAnimation(t,e){const n=getComputedStyle(t).transform;if(n&&"none"!==n){const t=new DOMMatrix(n);return new DOMRect(e.x-t.m41,e.y-t.m42,e.width,e.height)}return e}processAnimationStates(){let t=!1,e=0;return this.animationStates.forEach((n=>{const i=this.calculateAnimationDuration(n);i&&(t=!0,e=Math.max(e,i),this.setupAnimationReset(n.target,i))})),{animating:t,maxDuration:e}}calculateAnimationDuration(t){const{target:e}=t,n=u(e);let i=0;return e.thisAnimationDuration&&e.prevFromRect&&e.prevToRect&&g(e.prevFromRect,n)&&(i=((t,e,n,i)=>{const a=Math.pow(e.top-t.top,2),s=Math.pow(e.left-t.left,2),r=Math.pow(e.top-n.top,2),o=Math.pow(e.left-n.left,2);return Math.sqrt(a+s)/Math.sqrt(r+o)*(i.animation||0)})(t.rect,e.prevFromRect,e.prevToRect,this.sortable.options)),e.fromRect&&!g(n,e.fromRect)&&(this.updateAnimationTracking(e,n),i||(i=this.sortable.options.animation||0),this.animate(e,t.rect,n,i)),i}updateAnimationTracking(t,e){t.prevFromRect=t.fromRect,t.prevToRect=e}setupAnimationReset(t,e){t.animationResetTimer&&clearTimeout(t.animationResetTimer),t.animationResetTimer=window.setTimeout((()=>{t.animationTime=0,t.prevFromRect=null,t.fromRect=null,t.prevToRect=null,t.thisAnimationDuration=null,t.animationResetTimer=void 0}),e),this.cleanupManager.registerTimer(this.instanceId,t.animationResetTimer),t.thisAnimationDuration=e}scheduleCallback(t,e,n){this.animationCallbackId&&clearTimeout(this.animationCallbackId),t?(this.animationCallbackId=window.setTimeout((()=>{n?.(),this.animationCallbackId=void 0}),e),this.animationCallbackId&&this.cleanupManager.registerTimer(this.instanceId,this.animationCallbackId)):n?.()}clearAnimation(t){clearTimeout(this.animationCallbackId),t?.()}destroy(){this.cleanupManager.cleanup(this.instanceId)}}function f(t){const e=[t.tagName||"",t.className||"",t.src||"",t.href||"",t.textContent||""].join("_");let n=0;for(let t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t),n|=0}return Math.abs(n).toString(36)}const E=(t,e=!1)=>{let n;if(!t||!t.parentElement)return null;let i=t.parentElement;for(;i;){n=window.getComputedStyle(i);const t=n.overflow+n.overflowY+n.overflowX;if(/auto|scroll|overlay/.test(t)||e&&t.includes("hidden"))return i;i=i.parentElement}return document.scrollingElement||document.documentElement};class v{static defaultOptions={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:"vertical",draggingClass:"sortable-dragging",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent||"")},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!0,emptyInsertThreshold:5};state;instanceId;cleanupManager;animationManager;dragStartTimer;normalizedGroup=null;options;el;constructor(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw new Error("Sortable: `el` must be HTMLElement, not null or undefined");this.instanceId=Symbol("SortableInstance"),this.cleanupManager=i.getInstance(),this.el=t,this.options={...v.defaultOptions,...e},this.state=s.getInstance(),this.animationManager=new m(this),this.cleanupManager.registerAnimationCleanup(this.instanceId,(()=>{this.animationManager.destroy()})),this.state.registerInstance(t,this),this.initializeEventListeners(),this.options.group&&this.prepareGroup()}initializeEventListeners(){const t=t=>{this.verifyDrag(t)};this.options.supportPointer?this.cleanupManager.registerEventListener(this.instanceId,this.el,"pointerdown",t):(this.cleanupManager.registerEventListener(this.instanceId,this.el,"mousedown",t),this.cleanupManager.registerEventListener(this.instanceId,this.el,"touchstart",t));const e=E(this.el);if(e&&e!==document.documentElement&&e!==document.scrollingElement){const t=t=>{this.onScroll(t)};this.cleanupManager.registerEventListener(this.instanceId,e,"scroll",t)}}onMove=(t,e,n,i)=>{const a=this.options,s=a.swapThreshold||1,r=a.invertSwap||!1,o=a.invertedSwapThreshold||s,l=!r&&s>.5,c=this.state.getDragOperation();if("vertical"===n){const n=t.top+t.height/2,a=e.top+e.height/2;if(l?(n-a)/e.height>s:(a-n)/e.height>o)return this.dispatchMoveEvent(i,c.sourceEl,l)}else{const n=t.left+t.width/2,a=e.left+e.width/2;if(l?(n-a)/e.width>s:(a-n)/e.width>o)return this.dispatchMoveEvent(i,c.sourceEl,l)}return!1};dispatchMoveEvent(t,e,n){if(!t||!e)return!1;const i=new CustomEvent("sortable:move",{bubbles:!0,cancelable:!0,detail:{target:t,related:e,willInsertAfter:n}});return this.el.dispatchEvent(i),!i.defaultPrevented}verifyDrag=n=>{if(!n.cancelable)return;const i=this.state.getEventTarget(n);if(!i)return;const a=l(i,this.getDraggableSelector(),this.el,!1);if(!a)return;const s=e(n);if(!s)return;const{clientX:r,clientY:o}=s;this.state.startDrag(a,r,o);const c=t(n);c&&this.state.updateDragPosition(c.clientX,c.clientY),this.initializeDragOperation(c,a)};initDrag=()=>{const t=this.state.getDragOperation();if(!t.sourceEl)return;this.appendDraggingEl();const e=this.el.ownerDocument;this.options.supportPointer?this.cleanupManager.registerEventListener(this.instanceId,e,"pointermove",this.calculateDrag):(this.cleanupManager.registerEventListener(this.instanceId,e,"mousemove",this.calculateDrag),this.cleanupManager.registerEventListener(this.instanceId,e,"touchmove",this.calculateDrag)),this.cleanupManager.registerEventListener(this.instanceId,e,"dragover",this.onDragOver),this.state.updateDragElements({dragEl:t.sourceEl,oldIndex:Array.from(this.el.children).indexOf(t.sourceEl)}),this.dispatchSortEvent("dragstart")};initializeDragOperation(t,e){e.style.willChange="transform",this.bindDragListeners(!!t);const n=this.options.delay;this.shouldApplyDelay()?(this.dragStartTimer=window.setTimeout((()=>{this.initDrag(),this.dragStartTimer=void 0}),n),this.cleanupManager.registerTimer(this.instanceId,this.dragStartTimer)):this.initDrag()}calculateDrag=t=>{const n=this.state.getDragOperation();if(!n.active||!t.cancelable)return;const i=e(t);if(!i)return;const{clientX:a,clientY:s}=i;if(this.state.updateDragPosition(a,s),n.dragEl){t.preventDefault(),this.emulateDragOver(t);const e=d(n.dragEl)||{e:0,f:0},i=a-n.position.clientX,r=s-n.position.clientY;n.dragEl.style.transform=`translate3d(${i+(e.e||0)}px,${r+(e.f||0)}px,0)`}else if(!n.moved){const t=this.options.touchStartThreshold||1;Math.max(Math.abs(a-n.position.clientX),Math.abs(s-n.position.clientY))>=t&&(this.state.updateDragElements({moved:!0}),this.initDrag())}};onDragOver=t=>{const e=this.state.getDragOperation();if(!e.active||!e.sourceEl)return;let n,i;if(t.preventDefault(),t.stopPropagation(),this.isTouchEvent(t)){const e=t.touches[0];if(!e)return;n=e.clientX,i=e.clientY}else this.isDragEvent(t),n=t.clientX,i=t.clientY;const a=document.elementFromPoint(n,i);if(!a)return;const s=l(a,this.getDraggableSelector(),this.el,!1);if(!s||s===e.sourceEl)return;const r=u(s),o=this.getDirection(t,s),c=s.previousElementSibling,h=s.nextElementSibling,d=r.top+r.height/2,g=r.left+r.width/2,p="vertical"===o,m=(p?i:n)<(p?d:g),f=m?c:h,E=u(e.sourceEl);if(this.onMove(E,r,o,f)){this.captureAnimationState(),m?s.parentNode?.insertBefore(e.sourceEl,s):s.parentNode?.insertBefore(e.sourceEl,s.nextSibling),this.addAnimationState({target:s,rect:u(s)}),this.state.updateDragPosition(n,i);const t=e.oldIndex??-1,a=Array.from(this.el.children).indexOf(e.sourceEl);t!==a&&this.dispatchSortEvent("sort",{oldIndex:t,newIndex:a,dragEl:e.sourceEl,target:s}),this.options.animation&&this.animateAll()}};onScroll=t=>{const e=this.state.getDragOperation();if(!e.active||!e.dragEl)return;const{scrollTop:n,scrollLeft:i}=t.target,a=d(e.dragEl)||{e:0,f:0},s=e.position.clientX-e.position.initialX,r=e.position.clientY-e.position.initialY;e.dragEl.style.transform=`translate3d(${s+(a.e||0)}px,${r+(a.f||0)}px,0)`,this.state.updateScrollPosition(n,i)};emulateDragOver=t=>{const n=this.state.getDragOperation();if(!n.active||!n.dragEl)return;const i=e(t);if(!i)return;const{clientX:a,clientY:s}=i;this.toggleDraggingElVisibility(!1);const r=document.elementFromPoint(a,s);if(!(r&&r instanceof HTMLElement))return void this.toggleDraggingElVisibility(!0);if(this.toggleDraggingElVisibility(!0),this.isOutsideThisEl(r)){const e=this.getSortableParent(r);if(e&&e!==this)return void e.handleDragOver(t)}const o=l(r,this.getDraggableSelector(),this.el,!1);if(!o||o===n.sourceEl)return;const c=u(n.dragEl),h=u(o),d=this.getDirection(t,o),g=this.getTargetSibling(o,d);this.onMove(c,h,d,g)&&(this.captureAnimationState(),this._animate(o),this.addAnimationState({target:o,rect:u(o)}))};onDrop=t=>{t&&t.preventDefault();const e=this.state.getDragOperation();if(!e.active||!e.dragEl)return;e.dragEl.parentNode&&e.dragEl.parentNode.removeChild(e.dragEl);const n=this.options.draggingClass||"sortable-dragging",i=this.options.fallbackClass||"sortable-fallback";e.sourceEl&&(c(e.sourceEl,n,!1),c(e.sourceEl,i,!1)),this.dispatchSortEvent("drop"),this.state.endDrag()};getTargetSibling(t,e){return"vertical"===e?t.nextElementSibling:t.previousElementSibling}getSortableParent=t=>{let e=t;for(;e&&e!==document.body;){const t=this.state.getInstance(e);if(t)return t;e=e.parentElement}return null};toggleDraggingElVisibility(t){const e=this.state.getDragOperation();e.dragEl&&h(e.dragEl,"display",t?"":"none")}appendDraggingEl(){const t=this.state.getDragOperation();if(!t.sourceEl)return;const e=this.options.fallbackOnBody?document.body:this.el,n=E(this.el),i=(n&&n!==document.body)??!1,a=u(t.sourceEl,!0,this.options.fallbackOnBody,!0,e),s=this.createDragElement(t.sourceEl,a);this.positionDragElement(s,a,i,n),e.appendChild(s),this.state.updateDragElements({dragEl:s})}createDragElement(t,e){const n=t.cloneNode(!0),{draggingClass:i="sortable-dragging",fallbackClass:a="sortable-fallback"}=this.options;c(n,a,!0),c(n,i,!0);const s={position:"fixed",zIndex:"100000",pointerEvents:"none",width:`${e.width}px`,height:`${e.height}px`,boxSizing:"border-box",margin:"0",opacity:"0.8",transition:"",transform:""};return h(n,s),n}positionDragElement(t,e,n,i){if(!n)return void h(t,{top:`${e.top}px`,left:`${e.left}px`});const a=u(i),s=(r=i)===window?{scrollTop:window.pageYOffset||document.documentElement.scrollTop,scrollLeft:window.pageXOffset||document.documentElement.scrollLeft}:{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft};var r;h(t,{position:"absolute",top:`${e.top-a.top+s.scrollTop}px`,left:`${e.left-a.left+s.scrollLeft}px`})}isTouchEvent(t){return"touches"in t}isDragEvent(t){return"dataTransfer"in t}shouldApplyDelay(){return!!(this.options.delay&&this.options.delay>0)}bindDragListeners(t){const e=this.el.ownerDocument;this.options.supportPointer?(this.cleanupManager.registerEventListener(this.instanceId,e,"pointermove",this.calculateDrag),this.cleanupManager.registerEventListener(this.instanceId,e,"pointerup",this.onDrop),this.cleanupManager.registerEventListener(this.instanceId,e,"pointercancel",this.onDrop)):(this.cleanupManager.registerEventListener(this.instanceId,e,t?"touchmove":"mousemove",this.calculateDrag),this.cleanupManager.registerEventListener(this.instanceId,e,t?"touchend":"mouseup",this.onDrop),t&&this.cleanupManager.registerEventListener(this.instanceId,e,"touchcancel",this.onDrop))}_animate(t){const e=this.state.getDragOperation();if(!e.sourceEl)return;const n=Array.from(this.el.children).indexOf(e.sourceEl),i=Array.from(this.el.children).indexOf(t);n!==i&&(this.el.insertBefore(e.sourceEl,t),this.dispatchSortEvent("sort",{oldIndex:n,newIndex:i,dragEl:e.sourceEl,target:t}))}dispatchSortEvent(t,e={}){const n=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:{...e,from:this.el}});this.el.dispatchEvent(n)}getDirection(t,e){const n=this.options.direction;return"function"==typeof n?n.call(this,t,e,this.state.getDragOperation().sourceEl):n||"vertical"}isOutsideThisEl(t){return!t||!this.el.contains(t)&&t!==this.el}destroy(){this.state.destroyInstance(this.instanceId)}option(t,e){return void 0===e?this.options[t]:(this.options[t]=e,"group"===t&&this.prepareGroup(),e)}toArray(){return function(t,e,n){const i=[],a=t.children;for(let s=0;s<a.length;s++){const r=a[s];l(r,e,t,!1)&&i.push(r.getAttribute(n)||f(r))}return i}(this.el,this.getDraggableSelector(),this.options.dataIdAttr||"data-id")}sort(t,e){const n={},i=this.el;this.toArray().forEach(((t,e)=>{const a=i.children[e];l(a,this.getDraggableSelector(),i,!1)&&(n[t]=a)})),e&&this.captureAnimationState(),t.forEach((t=>{n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})),e&&this.animateAll()}save(){const t=this.options.store;t?.set?.(this)}captureAnimationState(){this.animationManager.captureAnimationState()}addAnimationState(t){this.animationManager.addAnimationState(t)}removeAnimationState(t){this.animationManager.removeAnimationState(t)}animateAll(t){this.animationManager.animateAll(t)}animate(t,e,n,i){this.animationManager.animate(t,e,n,i)}handleDragOver(t){this.onDragOver(t)}getDraggableSelector(){return this.options.draggable}prepareGroup(){const t=this.options;t.group||(t.group={name:void 0,pull:!0,put:!0,revertClone:!1}),"string"==typeof t.group&&(t.group={name:t.group});const e=t.group;this.normalizedGroup={name:e.name??null,checkPull:(t,n,i,a)=>!!e.pull&&("function"==typeof e.pull?e.pull(t,n,i,a):e.pull),checkPut:(t,n,i,a)=>{if(!e.put)return!1;if(Array.isArray(e.put)){const t=n.normalizedGroup;return e.put.includes(t?.name??"")}return"function"==typeof e.put?e.put(t,n,i,a):!!e.put},revertClone:e.revertClone??!1},this.cleanupManager.registerCustomCleanup(this.instanceId,(()=>{this.normalizedGroup=null}))}}export{m as AnimationStateManager,v as Sortable,p as animate,l as closest,u as getRect};
//# sourceMappingURL=index.min.js.map
